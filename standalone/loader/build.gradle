import com.github.jengelman.gradle.plugins.shadow.transformers.Log4j2PluginsCacheFileTransformer

plugins {
    alias(libs.plugins.shadow)
    id("java-library")
    id("application")
}

dependencies {
    implementation project(':common:loader-utils')
    api 'org.apache.logging.log4j:log4j-core:2.17.2'
    api 'org.apache.logging.log4j:log4j-slf4j-impl:2.17.2'
    api 'net.minecrell:terminalconsoleappender:1.3.0'
    api 'org.jline:jline-terminal-jansi:3.20.0'
}

sourceCompatibility = 17
targetCompatibility = 17

application {
    mainClass = 'me.lucko.luckperms.standalone.loader.StandaloneLoader'
}

processResources {
    include '*.xml'
}

shadowJar {
    archiveFileName = "LuckPerms-Standalone-${project.ext.fullVersion}.jar"

    from {
        project(':standalone').tasks.shadowJar.archiveFile
    }

    transform(Log4j2PluginsCacheFileTransformer)
}

artifacts {
    archives shadowJar
}
